{"version":3,"sources":["scripts/main.js"],"names":["employees","document","querySelector","sortTable","table","isAsc","columnTitle","addEventListener","e","tbody","target","textContent","Array","from","querySelectorAll","sort","getCompareFunction","parentNode","children","indexOf","forEach","tr","appendChild","headerIndex","headerName","dir","a","b","aCellValue","getRowCellValue","bCellValue","toString","localeCompare","parseInt","slice","index","selectRow","previousSelectedRow","classList","remove","add","createForm","newEmployeeForm","createElement","innerHTML","insertBefore","nextSibling","addEmployee","form","preventDefault","employeeName","employeePosition","employeeOffice","employeeAge","employeeSalary","value","length","pushNotification","trim","newEmployeeRow","toLocaleString","insertAdjacentHTML","posTop","posRight","title","description","type","body","message","dataset","qa","style","top","right","messageTitle","className","messageDescription","append","setTimeout","visibility","editTableCell","editedCell","input","isEditing","previousTextContent","setEditedCellValue","cellIndex","inputValue","split","join","tagName","focus","code"],"mappings":"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","file":"main.869195c1.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst employees = document.querySelector('table');\n\nsortTable(employees);\nselectRow(employees);\ncreateForm(employees);\neditTableCell(employees);\n\nfunction sortTable(table) {\n  let isAsc = true;\n  let columnTitle = '';\n\n  return document.querySelector('table').addEventListener('click', (e) => {\n    const tbody = table.querySelector('tbody');\n\n    if (columnTitle !== e.target.textContent) {\n      isAsc = true;\n      columnTitle = e.target.textContent;\n    }\n\n    Array.from(tbody.querySelectorAll('tr'))\n      .sort(\n        getCompareFunction(\n          Array.from(e.target.parentNode.children).indexOf(e.target),\n          e.target.textContent,\n          isAsc\n        )\n      )\n      .forEach((tr) => tbody.appendChild(tr));\n\n    isAsc = !isAsc;\n  });\n}\n\nfunction getCompareFunction(headerIndex, headerName, dir) {\n  return function(a, b) {\n    const aCellValue = getRowCellValue(dir ? a : b, headerIndex);\n    const bCellValue = getRowCellValue(dir ? b : a, headerIndex);\n\n    switch (headerName) {\n      case 'Name':\n      case 'Position':\n      case 'Office':\n        return aCellValue.toString().localeCompare(bCellValue);\n\n      case 'Age':\n        return aCellValue - bCellValue;\n\n      case 'Salary':\n        return parseInt(aCellValue.slice(1)) - parseInt(bCellValue.slice(1));\n    }\n  };\n}\n\nfunction getRowCellValue(tr, index) {\n  return tr.children[index].textContent;\n}\n\nfunction selectRow(table) {\n  let previousSelectedRow;\n\n  table.querySelector('tbody').addEventListener('click', (e) => {\n    if (previousSelectedRow) {\n      previousSelectedRow.classList.remove('active');\n    }\n\n    e.target.parentNode.classList.add('active');\n    previousSelectedRow = e.target.parentNode;\n  });\n}\n\nfunction createForm(table) {\n  const newEmployeeForm = document.createElement('form');\n\n  newEmployeeForm.classList.add('new-employee-form');\n\n  newEmployeeForm.innerHTML = `\n    <label>\n      Name: \n      <input \n        name=\"name\" \n        type=\"text\"\n        data-qa=\"name\"\n        required\n      >\n    </label>\n\n    <label>\n      Position: \n      <input \n        name=\"position\" \n        type=\"text\"\n        data-qa=\"position\"\n        required \n      >\n    </label>\n\n    <label>\n      Office:\n      <select \n        name=\"office\" \n        data-qa=\"office\"\n        required\n      >\n        <option>Tokyo</option>\n        <option>San Francisco</option>\n        <option>Singapore</option>\n        <option>New York</option>\n        <option>London</option>\n        <option>Edinburgh</option>\n      </select>\n    </label>\n    <label>\n      Age: \n      <input \n        name=\"age\" \n        type=\"number\"\n        data-qa=\"age\"\n        required\n      >\n    </label>\n    <label>\n      Salary: \n      <input \n        name=\"salary\" \n        type=\"number\" \n        data-qa=\"salary\"\n        required\n      >\n    </label>\n    <button type=\"submit\">\n      Save to table\n    </button>\n  `;\n\n  table.parentNode.insertBefore(newEmployeeForm, table.nextSibling);\n\n  addEmployee(newEmployeeForm);\n}\n\nfunction addEmployee(form) {\n  form.querySelector('button').addEventListener('click', (e) => {\n    e.preventDefault();\n\n    const employeeName = document.querySelector('[name=\"name\"]');\n    const employeePosition = document.querySelector('[name=\"position\"]');\n    const employeeOffice = document.querySelector('[name=\"office\"]');\n    const employeeAge = document.querySelector('[name=\"age\"]');\n    const employeeSalary = document.querySelector('[name=\"salary\"]');\n\n    if (employeeName.value.length < 4) {\n      pushNotification(\n        150,\n        10,\n        'Name input error',\n        'Name must not be less than 4 letters',\n        'error'\n      );\n\n      return;\n    }\n\n    if (employeePosition.value.length < 4) {\n      pushNotification(\n        150,\n        10,\n        'Position input error',\n        'Position must not be less than 4 letters',\n        'error'\n      );\n\n      return;\n    }\n\n    if (\n      employeeAge.value.trim() === ''\n      || parseInt(employeeAge.value) < 18\n      || parseInt(employeeAge.value) > 90\n    ) {\n      pushNotification(\n        150,\n        10,\n        'Age input error',\n        'Age must not be less than 18 and more than 90',\n        'error'\n      );\n\n      return;\n    }\n\n    if (employeeSalary.value.trim() === '') {\n      pushNotification(\n        150,\n        10,\n        'Salary input error',\n        'Salary must not be empty',\n        'error'\n      );\n\n      return;\n    }\n\n    const newEmployeeRow = `\n      <tr>\n        <td>${employeeName.value}</td>\n        <td>${employeePosition.value}</td>\n        <td>${employeeOffice.value}</td>\n        <td>${employeeAge.value}</td>\n        <td>$${parseInt(employeeSalary.value).toLocaleString('en-US')}</td>\n      </tr>\n    `;\n\n    document\n      .querySelector('tbody')\n      .insertAdjacentHTML('beforeend', newEmployeeRow);\n\n    pushNotification(\n      150,\n      10,\n      'Success!',\n      'New employee successfully added to the table',\n      'success'\n    );\n\n    employeeName.value = '';\n    employeePosition.value = '';\n    employeeOffice.value = 'Tokyo';\n    employeeAge.value = '';\n    employeeSalary.value = '';\n  });\n}\n\nfunction pushNotification(posTop, posRight, title, description, type) {\n  const body = document.querySelector('body');\n  const message = document.createElement('div');\n\n  message.classList = `notification ${type}`;\n  message.dataset.qa = 'notification';\n  message.style.top = posTop + 'px';\n  message.style.right = posRight + 'px';\n\n  const messageTitle = document.createElement('h2');\n\n  messageTitle.className = 'title';\n  messageTitle.textContent = title;\n\n  const messageDescription = document.createElement('p');\n\n  messageDescription.textContent = description;\n\n  message.append(messageTitle, messageDescription);\n  body.append(message);\n\n  setTimeout(() => {\n    message.style.visibility = 'hidden';\n  }, 2000);\n}\n\nfunction editTableCell(table) {\n  const tbody = table.querySelector('tbody');\n  const input = document.createElement('input');\n\n  let isEditing = false;\n  let editedCell;\n  let previousTextContent = '';\n\n  tbody.addEventListener('dblclick', (e) => {\n    if (!isEditing && e.target.tagName === 'TD') {\n      isEditing = true;\n      editedCell = e.target;\n      previousTextContent = editedCell.textContent;\n      input.classList = 'cell-input';\n      input.value = previousTextContent;\n      editedCell.textContent = '';\n      editedCell.appendChild(input);\n      input.focus();\n    }\n  });\n\n  tbody.addEventListener('keydown', (e) => {\n    if (e.code !== 'Enter' || !isEditing) {\n      return;\n    }\n\n    setEditedCellValue();\n  });\n\n  input.addEventListener('blur', (e) => {\n    setEditedCellValue();\n  });\n\n  function setEditedCellValue() {\n    if (isEditing) {\n      const cellIndex = Array.from(editedCell.parentNode.children).indexOf(\n        editedCell\n      );\n      const inputValue = input.value.trim();\n\n      switch (true) {\n        case inputValue && cellIndex === 4:\n          editedCell.textContent\n            = inputValue.slice(0, 1) === '$'\n              ? `$${parseInt(\n                inputValue.split(',').join('').slice(1)\n              ).toLocaleString('en-US')}`\n              : `$${parseInt(inputValue.split(',').join('')).toLocaleString(\n                'en-US'\n              )}`;\n          break;\n        case inputValue && cellIndex !== 4:\n          editedCell.textContent = inputValue;\n          break;\n        case !inputValue:\n          editedCell.textContent = previousTextContent;\n      }\n\n      isEditing = false;\n    }\n  }\n}\n"]}